---
import CategoryList from '../../components/CategoryList.astro';
import Layout from '../../layouts/Layout.astro';
import { BASE_PATH } from '../../config';

export async function getStaticPaths() {
  // モックカテゴリーデータ
  const mockCategories = [
    { id: 'documentation', name: 'ドキュメント', count: 1, color: '0075ca', description: 'ドキュメント関連' },
    { id: 'tutorial', name: 'チュートリアル', count: 2, color: 'd876e3', description: 'チュートリアル' },
    { id: 'wiki', name: 'Wiki', count: 1, color: '0e8a16', description: 'Wiki記事' }
  ];
  
  return mockCategories.map(category => {
    return {
      params: { category: category.id },
      props: { category }
    };
  });
}

const { category } = Astro.props;

// モックIssueデータ
const mockIssues = [
  {
    number: 1,
    title: 'サンプルドキュメント',
    body: '# サンプルドキュメント\n\nこれはサンプルドキュメントの内容です。\n\n## セクション1\n\nサンプルテキスト...',
    html_url: 'https://github.com/nao-amj/starlight-issue-wiki/issues/1',
    created_at: '2025-03-01T00:00:00Z',
    updated_at: '2025-03-01T00:00:00Z',
    labels: [
      { name: 'documentation', color: '0075ca', description: 'ドキュメント関連' }
    ]
  },
  {
    number: 2,
    title: 'Markdownの使い方',
    body: '# Markdownの使い方\n\nこのWikiではMarkdownを使って文書を書くことができます。\n\n## 見出し\n\n見出しは`#`を使って表現します。\n\n## リスト\n\n- 箇条書き1\n- 箇条書き2\n\n順序付きリスト:\n\n1. 項目1\n2. 項目2',
    html_url: 'https://github.com/nao-amj/starlight-issue-wiki/issues/2',
    created_at: '2025-03-05T00:00:00Z',
    updated_at: '2025-03-06T00:00:00Z',
    labels: [
      { name: 'tutorial', color: 'd876e3', description: 'チュートリアル' },
      { name: 'wiki', color: '0e8a16', description: 'Wiki記事' }
    ]
  },
  {
    number: 3,
    title: 'GitHubの使い方',
    body: '# GitHubの使い方\n\n## アカウント作成\n\nGitHubアカウントを作成するには...\n\n## リポジトリの作成\n\n1. 右上の+ボタンをクリック\n2. New repositoryを選択\n3. ...',
    html_url: 'https://github.com/nao-amj/starlight-issue-wiki/issues/3',
    created_at: '2025-03-10T00:00:00Z',
    updated_at: '2025-03-10T00:00:00Z',
    labels: [
      { name: 'tutorial', color: 'd876e3', description: 'チュートリアル' }
    ]
  }
];

// ページタイトル
const pageTitle = `カテゴリー: ${category.name}`;
---

<Layout title={pageTitle}>
  <div class="content-panel">
    <div class="category-header">
      <h1>{category.name}</h1>
      
      <div class="category-badge" style={`background-color: #${category.color}20; color: #${category.color}; border: 1px solid #${category.color}40;`}>
        {category.count} 件のコンテンツ
      </div>
      
      {category.description && (
        <p class="category-description">{category.description}</p>
      )}
    </div>
    
    <CategoryList 
      issues={mockIssues} 
      title="このカテゴリーのコンテンツ" 
      category={category.id}
      showViewAll={false}
    />
  </div>
</Layout>

<style>
  .content-panel {
    background: white;
    padding: 2rem;
    border-radius: 8px;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
    margin: 2rem 0;
  }

  .category-header {
    margin-bottom: 2rem;
    border-bottom: 1px solid #eee;
    padding-bottom: 1rem;
  }
  
  .category-badge {
    display: inline-block;
    padding: 0.3rem 0.7rem;
    border-radius: 0.25rem;
    font-size: 0.9rem;
    font-weight: 500;
    margin: 0.5rem 0 1rem;
  }
  
  .category-description {
    font-size: 1.1rem;
    line-height: 1.6;
    margin-top: 1rem;
    color: #666;
  }
</style>
